<div vlass="orderHistoryWrapper">

  <!-- ORDER HISTORY HEADER -->
  <div class="coverHeader">
    <div class="coverHeaderContainer">
      <h1 class="coverHeaderHeadline">{{'POVIJEST_NARUDZBI' | translate}}</h1>
      <h2 class="coverHeaderContent">{{'POVIJEST_NARUDZBI_HEADER' | translate}}</h2>
    </div>
    <div class="triangleShapeDivider">
      <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
        <path d="M1200 0L0 0 598.97 114.72 1200 0z" class="shape-fill"></path>
      </svg>
    </div>
  </div>

  <!-- ORDER HISTORY SECTION-->
  <div *ngIf="orders.length > 0; else noOrders" class="ordersWrapper">
    <div *ngFor="let order of orders">
      <div class="orderHeader">
        <div class="orderText">
          {{order.orderTime}}
        </div>
        <div class="orderText">
          {{order.address}}
        </div>
        <div class="orderText">
          {{order.note}}
        </div>
        <div class="orderText">
          <div *ngIf="!selectedOrderToRepeat.priceChanged || selectedOrderToRepeat.orderId !== order.orderId; else changedPriceTotal" style="display: flex; flex-direction: column;">
            <span style="align-self: center;">
              {{order.price}} kn
            </span>
            <a class="btn" style="width: 100%;" (click)="repeatOrder(order)">{{'NARUCI' | translate}}</a>
          </div>

          <ng-template #changedPriceTotal>
            <div class="priceChangeWarnText">Neke cijene su se promjenile! Potvrdite narud≈æbu.</div>
            <div class="ta-c">
              <span class="red"> {{order.price}} kn
              </span> <i class="fa fa-arrow-right" aria-hidden="true" style="margin: 5px 10px;"></i>
              <span class="green"> {{selectedOrderToRepeat.repeatOrderPriceTotal}} kn</span>
            </div>
            <div class="flex">
              <a class="btn" style="margin-right: 10px" (click)="confirmOrder(order)">{{'NARUCI' | translate}}</a>
              <a class="btn btnRemove" (click)="rejectOrder()">{{'ODUSTANI' | translate}}</a>
            </div>
          </ng-template>
        </div>
      </div>
      <div class="ui-g ui-fluid w-100">
        <div *ngFor="let item of order.orderProduct" class="ui-g-12 ui-xl-2 ui-lg-3 ui-md-6 ui-sm-12 productWrapper"
          (click)="navigateToProduct(item.product.name, item.product.productId)">
          <span class="cursot-pnt w-100 ta-c" style="font-size: 1.3rem;">{{item.quantity}}</span>
          <div class="productImage">
            <img src="assets/images/products/{{item.product.imageName}}" style="width: 100px">
          </div>
          <div class="productName">
            {{item.product.name}}
          </div>
          <div class="productPrice">
            <span *ngIf="item.productPriceATM === item.product.price || !selectedOrderToRepeat.priceChanged || selectedOrderToRepeat.orderId !== item.orderId; else changedPrice">
              {{item.productPriceATM}} kn
            </span>
            <ng-template #changedPrice>
              <span class="red"> {{item.productPriceATM}} kn
              </span> <i class="fa fa-arrow-right" aria-hidden="true" style="margin: 5px 10px;"></i>
              <span class="green"> {{item.product.price}} kn</span>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #noOrders>
  <div class="noOrders">
    <img src="assets/images/NoOrders.png">
    <div class="noOrdersText">
      {{'NO_ORDERS' | translate}}
    </div>
  </div>
</ng-template>